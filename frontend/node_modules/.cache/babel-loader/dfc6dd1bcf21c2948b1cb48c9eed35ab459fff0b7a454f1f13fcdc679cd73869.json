{"ast":null,"code":"var _jsxFileName = \"D:\\\\Payment-Gateway\\\\frontend\\\\src\\\\App.jsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { useState } from 'react';\nimport axios from 'axios';\nimport './styles/main.css';\nimport { loadStripe } from '@stripe/stripe-js';\nimport { Elements, CardElement, CardNumberElement, CardExpiryElement, CardCvcElement, useStripe, useElements } from '@stripe/react-stripe-js';\n\n// Backend API URL\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_BASE_URL = 'http://localhost:8000';\n\n// Alternative PaymentForm using individual elements (commented out for now)\n/*\nfunction IndividualCardPaymentForm({ formData, setFormData, paymentData, setPaymentData, setMessage, setMessageType, setLoading, setStep, loading }) {\n  const stripe = useStripe();\n  const elements = useElements();\n\n  const cardElementOptions = {\n    style: {\n      base: {\n        fontSize: '16px',\n        color: '#424770',\n        '::placeholder': {\n          color: '#aab7c4',\n        },\n      },\n      invalid: {\n        color: '#9e2146',\n      },\n    },\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n    setMessage('');\n    try {\n      // 1. Create payment intent\n      const intentRes = await axios.post(`${API_BASE_URL}/stripe/create-payment-intent`, {\n        amount: Math.round(formData.amount * 100),\n        currency: 'usd',\n        full_name: formData.full_name,\n        email: formData.email,\n        phone: formData.phone\n      });\n      const { client_secret, payment_intent_id } = intentRes.data;\n\n      // 2. Create payment method with individual elements\n      const { error: pmError, paymentMethod } = await stripe.createPaymentMethod({\n        type: 'card',\n        card: {\n          number: elements.getElement(CardNumberElement),\n          exp_month: elements.getElement(CardExpiryElement),\n          cvc: elements.getElement(CardCvcElement),\n        },\n        billing_details: {\n          name: formData.full_name,\n          email: formData.email,\n          phone: formData.phone\n        }\n      });\n      \n      if (pmError) {\n        setMessageType('error');\n        setMessage(pmError.message);\n        setLoading(false);\n        return;\n      }\n\n      // 3. Confirm card payment with Stripe.js\n      const { error: confirmError, paymentIntent } = await stripe.confirmCardPayment(client_secret, {\n        payment_method: paymentMethod.id\n      });\n      if (confirmError) {\n        setMessageType('error');\n        setMessage(confirmError.message);\n        setLoading(false);\n        return;\n      }\n      if (paymentIntent.status !== 'succeeded') {\n        setMessageType('error');\n        setMessage('Payment was not successful.');\n        setLoading(false);\n        return;\n      }\n\n      // 4. Notify backend to update transaction status\n      await axios.post(`${API_BASE_URL}/stripe/confirm-payment`, {\n        payment_intent_id,\n        payment_method_id: paymentMethod.id\n      });\n      setMessageType('success');\n      setMessage('Payment successful!');\n      setFormData({ full_name: '', email: '', phone: '', amount: '' });\n      setPaymentData({ payment_method: 'visa', card_number: '', expiry_month: '', expiry_year: '', cvv: '', cardholder_name: '' });\n      setStep(1);\n    } catch (error) {\n      setMessageType('error');\n      setMessage(error.response?.data?.detail || 'Payment failed. Please try again.');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <form onSubmit={handleSubmit}>\n      <div className=\"mb-3\">\n        <label className=\"form-label\">Card Number</label>\n        <CardNumberElement options={cardElementOptions} />\n      </div>\n      <div className=\"row\">\n        <div className=\"col-md-6\">\n          <div className=\"mb-3\">\n            <label className=\"form-label\">Expiry Date</label>\n            <CardExpiryElement options={cardElementOptions} />\n          </div>\n        </div>\n        <div className=\"col-md-6\">\n          <div className=\"mb-3\">\n            <label className=\"form-label\">CVC</label>\n            <CardCvcElement options={cardElementOptions} />\n          </div>\n        </div>\n      </div>\n      <button type=\"submit\" className=\"btn btn-pay text-white\" disabled={loading}>\n        {loading ? 'Processing...' : 'PAY NOW'}\n      </button>\n    </form>\n  );\n}\n*/\n\nfunction PaymentForm({\n  formData,\n  setFormData,\n  paymentData,\n  setPaymentData,\n  setMessage,\n  setMessageType,\n  setLoading,\n  setStep,\n  loading\n}) {\n  _s();\n  const stripe = useStripe();\n  const elements = useElements();\n\n  // Custom options for CardElement\n  const cardElementOptions = {\n    style: {\n      base: {\n        fontSize: '16px',\n        color: '#424770',\n        '::placeholder': {\n          color: '#aab7c4'\n        },\n        ':-webkit-autofill': {\n          color: '#fce883'\n        }\n      },\n      invalid: {\n        color: '#9e2146'\n      }\n    },\n    hidePostalCode: true // This makes postal code optional\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setLoading(true);\n    setMessage('');\n    try {\n      console.log('Starting payment process...');\n\n      // 1. Create payment intent\n      console.log('Creating payment intent...');\n      const intentRes = await axios.post(`${API_BASE_URL}/stripe/create-payment-intent`, {\n        amount: Math.round(formData.amount * 100),\n        currency: 'usd',\n        full_name: formData.full_name,\n        email: formData.email,\n        phone: formData.phone\n      });\n      console.log('Payment intent created:', intentRes.data);\n      const {\n        client_secret,\n        payment_intent_id\n      } = intentRes.data;\n\n      // 2. Create payment method with Stripe.js\n      console.log('Creating payment method...');\n      const cardElement = elements.getElement(CardElement);\n      const {\n        error: pmError,\n        paymentMethod\n      } = await stripe.createPaymentMethod({\n        type: 'card',\n        card: cardElement,\n        billing_details: {\n          name: formData.full_name,\n          email: formData.email,\n          phone: formData.phone\n        }\n      });\n      if (pmError) {\n        console.error('Payment method error:', pmError);\n        setMessageType('error');\n        setMessage(pmError.message);\n        setLoading(false);\n        return;\n      }\n      console.log('Payment method created:', paymentMethod.id);\n\n      // 3. Confirm card payment with Stripe.js\n      console.log('Confirming payment...');\n      const {\n        error: confirmError,\n        paymentIntent\n      } = await stripe.confirmCardPayment(client_secret, {\n        payment_method: paymentMethod.id\n      });\n      if (confirmError) {\n        console.error('Payment confirmation error:', confirmError);\n        setMessageType('error');\n        setMessage(confirmError.message);\n        setLoading(false);\n        return;\n      }\n      console.log('Payment confirmed, status:', paymentIntent.status);\n\n      // 4. Check payment status\n      if (paymentIntent.status === 'succeeded') {\n        console.log('Payment succeeded, notifying backend...');\n        // Payment succeeded, notify backend\n        try {\n          const backendRes = await axios.post(`${API_BASE_URL}/stripe/confirm-payment`, {\n            payment_intent_id,\n            payment_method_id: paymentMethod.id\n          });\n          console.log('Backend confirmation successful:', backendRes.data);\n          setMessageType('success');\n          setMessage('Payment successful!');\n          setFormData({\n            full_name: '',\n            email: '',\n            phone: '',\n            amount: ''\n          });\n          setPaymentData({\n            payment_method: 'visa',\n            card_number: '',\n            expiry_month: '',\n            expiry_year: '',\n            cvv: '',\n            cardholder_name: ''\n          });\n          setStep(1);\n        } catch (backendError) {\n          var _backendError$respons, _backendError$respons2, _backendError$respons3, _backendError$respons4;\n          console.error('Backend confirmation error:', backendError);\n          // If backend fails but payment succeeded, still show success\n          if (((_backendError$respons = backendError.response) === null || _backendError$respons === void 0 ? void 0 : _backendError$respons.status) === 400 && (_backendError$respons2 = backendError.response) !== null && _backendError$respons2 !== void 0 && (_backendError$respons3 = _backendError$respons2.data) !== null && _backendError$respons3 !== void 0 && (_backendError$respons4 = _backendError$respons3.detail) !== null && _backendError$respons4 !== void 0 && _backendError$respons4.includes('already succeeded')) {\n            setMessageType('success');\n            setMessage('Payment successful! (Transaction already processed)');\n            setFormData({\n              full_name: '',\n              email: '',\n              phone: '',\n              amount: ''\n            });\n            setPaymentData({\n              payment_method: 'visa',\n              card_number: '',\n              expiry_month: '',\n              expiry_year: '',\n              cvv: '',\n              cardholder_name: ''\n            });\n            setStep(1);\n          } else {\n            setMessageType('error');\n            setMessage('Payment succeeded but there was an issue with transaction recording. Please contact support.');\n          }\n        }\n      } else if (paymentIntent.status === 'requires_action') {\n        console.log('Payment requires action');\n        setMessageType('error');\n        setMessage('Payment requires additional authentication. Please try again.');\n      } else {\n        console.log('Payment not successful, status:', paymentIntent.status);\n        setMessageType('error');\n        setMessage(`Payment was not successful. Status: ${paymentIntent.status}`);\n      }\n    } catch (error) {\n      var _error$response, _error$response$data;\n      console.error('Payment process error:', error);\n      setMessageType('error');\n      setMessage(((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.detail) || 'Payment failed. Please try again.');\n    } finally {\n      console.log('Payment process completed, setting loading to false');\n      setLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: handleSubmit,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mb-3\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"form-label\",\n        children: \"Card Details\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 262,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(CardElement, {\n        options: cardElementOptions\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 263,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 261,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      type: \"submit\",\n      className: \"btn btn-pay text-white\",\n      disabled: loading,\n      children: loading ? 'Processing...' : 'PAY NOW'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 265,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 259,\n    columnNumber: 5\n  }, this);\n}\n_s(PaymentForm, \"EKvoGMX7lxsZ5SGPpYu2aKFzClQ=\", false, function () {\n  return [useStripe, useElements];\n});\n_c = PaymentForm;\nfunction App() {\n  _s2();\n  const [step, setStep] = useState(1); // 1: Basic info, 2: Payment method, 3: Card details\n  const [formData, setFormData] = useState({\n    full_name: '',\n    email: '',\n    phone: '',\n    amount: ''\n  });\n  const [paymentData, setPaymentData] = useState({\n    payment_method: 'visa',\n    card_number: '',\n    expiry_month: '',\n    expiry_year: '',\n    cvv: '',\n    cardholder_name: ''\n  });\n  const [loading, setLoading] = useState(false);\n  const [message, setMessage] = useState('');\n  const [messageType, setMessageType] = useState('');\n  const [cardValidation, setCardValidation] = useState({});\n  const handleInputChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  };\n  const handlePaymentInputChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n\n    // Special handling for card number formatting\n    if (name === 'card_number') {\n      // Remove all non-digits\n      const digitsOnly = value.replace(/\\D/g, '');\n\n      // Add spaces after every 4 digits\n      const formatted = digitsOnly.replace(/(\\d{4})(?=\\d)/g, '$1 ');\n\n      // Limit to 19 characters (16 digits + 3 spaces)\n      const limited = formatted.slice(0, 19);\n      setPaymentData(prev => ({\n        ...prev,\n        [name]: limited\n      }));\n    } else {\n      setPaymentData(prev => ({\n        ...prev,\n        [name]: value\n      }));\n    }\n  };\n  const validateBasicInfo = () => {\n    if (!formData.full_name || !formData.email || !formData.phone || !formData.amount) {\n      setMessage('Please fill in all fields');\n      setMessageType('error');\n      return false;\n    }\n    if (parseFloat(formData.amount) <= 0) {\n      setMessage('Amount must be greater than 0');\n      setMessageType('error');\n      return false;\n    }\n    return true;\n  };\n  const validateCardDetails = async () => {\n    // Only validate if card details are provided\n    if (!paymentData.card_number || !paymentData.expiry_month || !paymentData.expiry_year || !paymentData.cvv) {\n      setMessage('Please fill in all card details');\n      setMessageType('error');\n      return false;\n    }\n\n    // Client-side validation first\n    const cardNumber = paymentData.card_number.replace(/\\s/g, '');\n    if (cardNumber.length < 13 || cardNumber.length > 19) {\n      setMessage('Invalid card number length');\n      setMessageType('error');\n      return false;\n    }\n\n    // Basic Luhn algorithm check\n    const luhnCheck = num => {\n      let arr = (num + '').split('').reverse().map(x => parseInt(x));\n      let lastDigit = arr.splice(0, 1)[0];\n      let sum = arr.reduce((acc, val, i) => i % 2 !== 0 ? acc + val : acc + val * 2 % 9 || 9, 0);\n      sum += lastDigit;\n      return sum % 10 === 0;\n    };\n    if (!luhnCheck(cardNumber)) {\n      setMessage('Invalid card number');\n      setMessageType('error');\n      return false;\n    }\n\n    // Check expiry date\n    const currentDate = new Date();\n    const currentYear = currentDate.getFullYear();\n    const currentMonth = currentDate.getMonth() + 1;\n    const expYear = parseInt(paymentData.expiry_year);\n    const expMonth = parseInt(paymentData.expiry_month);\n    if (expYear < currentYear || expYear === currentYear && expMonth < currentMonth) {\n      setMessage('Card has expired');\n      setMessageType('error');\n      return false;\n    }\n\n    // Check CVV length\n    const expectedCvvLength = paymentData.payment_method === 'amex' ? 4 : 3;\n    if (paymentData.cvv.length !== expectedCvvLength) {\n      setMessage(`CVV must be ${expectedCvvLength} digits for ${paymentData.payment_method.toUpperCase()}`);\n      setMessageType('error');\n      return false;\n    }\n\n    // Try backend validation if available, but don't fail if it's not\n    try {\n      const response = await axios.post(`${API_BASE_URL}/validate-card`, {\n        card_number: paymentData.card_number,\n        expiry_month: paymentData.expiry_month,\n        expiry_year: paymentData.expiry_year,\n        cvv: paymentData.cvv\n      }, {\n        timeout: 5000 // 5 second timeout\n      });\n      if (response.data.valid) {\n        setCardValidation(response.data);\n        return true;\n      } else {\n        setMessage(`Card validation failed: ${response.data.error}`);\n        setMessageType('error');\n        return false;\n      }\n    } catch (error) {\n      console.log('Backend validation failed, proceeding with client-side validation:', error.message);\n      // If backend validation fails, proceed with client-side validation\n      setCardValidation({\n        valid: true,\n        card_type: paymentData.payment_method,\n        masked_number: `**** **** **** ${cardNumber.slice(-4)}`\n      });\n      return true;\n    }\n  };\n  const handleNextStep = async () => {\n    setMessage('');\n    if (step === 1) {\n      if (validateBasicInfo()) {\n        setStep(2);\n      }\n    } else if (step === 2) {\n      // Simply move to step 3 without validation - validation happens on submit\n      setStep(3);\n    }\n  };\n  const stripePromise = loadStripe(process.env.REACT_APP_STRIPE_PUBLISHABLE_KEY || 'pk_test_your_actual_publishable_key_here');\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"payment-container\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"payment-card\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"payment-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"\\uD83D\\uDD12 GenZ Payment Gateway\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 449,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Your payment information is encrypted and secure\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 450,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 448,\n        columnNumber: 9\n      }, this), message && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `alert ${messageType === 'success' ? 'success-alert' : 'error-alert'} mb-4`,\n        children: message\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 454,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"progress-bar mb-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: `progress-step ${step >= 1 ? 'active' : ''}`,\n          children: \"1. Personal Info\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 460,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `progress-step ${step >= 2 ? 'active' : ''}`,\n          children: \"2. Payment Method\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 461,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `progress-step ${step >= 3 ? 'active' : ''}`,\n          children: \"3. Card Details\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 462,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 459,\n        columnNumber: 9\n      }, this), step === 1 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"payment-step\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Personal Information\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 467,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"full_name\",\n            className: \"form-label\",\n            children: \"Full Name\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 469,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            className: \"form-control\",\n            id: \"full_name\",\n            name: \"full_name\",\n            value: formData.full_name,\n            onChange: handleInputChange,\n            required: true,\n            placeholder: \"Enter your full name\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 470,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 468,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"email\",\n            className: \"form-label\",\n            children: \"Email Address\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 483,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"email\",\n            className: \"form-control\",\n            id: \"email\",\n            name: \"email\",\n            value: formData.email,\n            onChange: handleInputChange,\n            required: true,\n            placeholder: \"Enter your email\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 484,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 482,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"phone\",\n            className: \"form-label\",\n            children: \"Phone Number\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 497,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"tel\",\n            className: \"form-control\",\n            id: \"phone\",\n            name: \"phone\",\n            value: formData.phone,\n            onChange: handleInputChange,\n            required: true,\n            placeholder: \"Enter your phone number\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 498,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 496,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"amount\",\n            className: \"form-label\",\n            children: \"Payment Amount\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 511,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"input-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"input-group-text\",\n              children: \"$\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 513,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"number\",\n              className: \"form-control\",\n              id: \"amount\",\n              name: \"amount\",\n              value: formData.amount,\n              onChange: handleInputChange,\n              required: true,\n              min: \"0.01\",\n              step: \"0.01\",\n              placeholder: \"0.00\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 514,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 512,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 510,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          className: \"btn btn-primary w-100\",\n          onClick: handleNextStep,\n          children: \"Continue to Payment Method\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 529,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 466,\n        columnNumber: 11\n      }, this), step === 2 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"payment-step\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Select Payment Method\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 540,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"payment-methods\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"payment-method-option\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"radio\",\n              id: \"visa\",\n              name: \"payment_method\",\n              value: \"visa\",\n              checked: paymentData.payment_method === 'visa',\n              onChange: handlePaymentInputChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 543,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"visa\",\n              className: \"payment-method-label\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"card-icon\",\n                children: \"\\uD83D\\uDCB3\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 552,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Visa\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 553,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 551,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 542,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"payment-method-option\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"radio\",\n              id: \"mastercard\",\n              name: \"payment_method\",\n              value: \"mastercard\",\n              checked: paymentData.payment_method === 'mastercard',\n              onChange: handlePaymentInputChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 558,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"mastercard\",\n              className: \"payment-method-label\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"card-icon\",\n                children: \"\\uD83D\\uDCB3\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 567,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Mastercard\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 568,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 566,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 557,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"payment-method-option\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"radio\",\n              id: \"amex\",\n              name: \"payment_method\",\n              value: \"amex\",\n              checked: paymentData.payment_method === 'amex',\n              onChange: handlePaymentInputChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 573,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"amex\",\n              className: \"payment-method-label\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"card-icon\",\n                children: \"\\uD83D\\uDCB3\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 582,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"American Express\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 583,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 581,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 572,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"payment-method-option\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"radio\",\n              id: \"discover\",\n              name: \"payment_method\",\n              value: \"discover\",\n              checked: paymentData.payment_method === 'discover',\n              onChange: handlePaymentInputChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 588,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"discover\",\n              className: \"payment-method-label\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"card-icon\",\n                children: \"\\uD83D\\uDCB3\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 597,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Discover\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 598,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 596,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 587,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 541,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"btn btn-secondary me-2\",\n            onClick: () => setStep(1),\n            children: \"Back\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 604,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"btn btn-primary\",\n            onClick: handleNextStep,\n            children: \"Continue to Card Details\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 611,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 603,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 539,\n        columnNumber: 11\n      }, this), step === 3 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"payment-step\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Card Details\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 623,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card-preview\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card-front\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card-type\",\n              children: paymentData.payment_method.toUpperCase()\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 626,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card-number\",\n              children: paymentData.card_number ? `**** **** **** ${paymentData.card_number.slice(-4)}` : '**** **** **** ****'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 627,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card-details\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"cardholder\",\n                children: paymentData.cardholder_name || 'CARDHOLDER NAME'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 634,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"expiry\",\n                children: [paymentData.expiry_month || 'MM', \"/\", paymentData.expiry_year || 'YY']\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 635,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 633,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 625,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 624,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Elements, {\n          stripe: stripePromise,\n          children: /*#__PURE__*/_jsxDEV(PaymentForm, {\n            formData: formData,\n            setFormData: setFormData,\n            paymentData: paymentData,\n            setPaymentData: setPaymentData,\n            setMessage: setMessage,\n            setMessageType: setMessageType,\n            setLoading: setLoading,\n            setStep: setStep,\n            loading: loading\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 641,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 640,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 622,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 447,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 446,\n    columnNumber: 5\n  }, this);\n}\n_s2(App, \"n4Ss3eADwjOEUy8rG4CXNEFgPhs=\");\n_c2 = App;\nexport default App;\nvar _c, _c2;\n$RefreshReg$(_c, \"PaymentForm\");\n$RefreshReg$(_c2, \"App\");","map":{"version":3,"names":["React","useState","axios","loadStripe","Elements","CardElement","CardNumberElement","CardExpiryElement","CardCvcElement","useStripe","useElements","jsxDEV","_jsxDEV","API_BASE_URL","PaymentForm","formData","setFormData","paymentData","setPaymentData","setMessage","setMessageType","setLoading","setStep","loading","_s","stripe","elements","cardElementOptions","style","base","fontSize","color","invalid","hidePostalCode","handleSubmit","e","preventDefault","console","log","intentRes","post","amount","Math","round","currency","full_name","email","phone","data","client_secret","payment_intent_id","cardElement","getElement","error","pmError","paymentMethod","createPaymentMethod","type","card","billing_details","name","message","id","confirmError","paymentIntent","confirmCardPayment","payment_method","status","backendRes","payment_method_id","card_number","expiry_month","expiry_year","cvv","cardholder_name","backendError","_backendError$respons","_backendError$respons2","_backendError$respons3","_backendError$respons4","response","detail","includes","_error$response","_error$response$data","onSubmit","children","className","fileName","_jsxFileName","lineNumber","columnNumber","options","disabled","_c","App","_s2","step","messageType","cardValidation","setCardValidation","handleInputChange","value","target","prev","handlePaymentInputChange","digitsOnly","replace","formatted","limited","slice","validateBasicInfo","parseFloat","validateCardDetails","cardNumber","length","luhnCheck","num","arr","split","reverse","map","x","parseInt","lastDigit","splice","sum","reduce","acc","val","i","currentDate","Date","currentYear","getFullYear","currentMonth","getMonth","expYear","expMonth","expectedCvvLength","toUpperCase","timeout","valid","card_type","masked_number","handleNextStep","stripePromise","process","env","REACT_APP_STRIPE_PUBLISHABLE_KEY","htmlFor","onChange","required","placeholder","min","onClick","checked","_c2","$RefreshReg$"],"sources":["D:/Payment-Gateway/frontend/src/App.jsx"],"sourcesContent":["import React, { useState } from 'react';\nimport axios from 'axios';\nimport './styles/main.css';\nimport { loadStripe } from '@stripe/stripe-js';\nimport { Elements, CardElement, CardNumberElement, CardExpiryElement, CardCvcElement, useStripe, useElements } from '@stripe/react-stripe-js';\n\n// Backend API URL\nconst API_BASE_URL = 'http://localhost:8000';\n\n// Alternative PaymentForm using individual elements (commented out for now)\n/*\nfunction IndividualCardPaymentForm({ formData, setFormData, paymentData, setPaymentData, setMessage, setMessageType, setLoading, setStep, loading }) {\n  const stripe = useStripe();\n  const elements = useElements();\n\n  const cardElementOptions = {\n    style: {\n      base: {\n        fontSize: '16px',\n        color: '#424770',\n        '::placeholder': {\n          color: '#aab7c4',\n        },\n      },\n      invalid: {\n        color: '#9e2146',\n      },\n    },\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n    setMessage('');\n    try {\n      // 1. Create payment intent\n      const intentRes = await axios.post(`${API_BASE_URL}/stripe/create-payment-intent`, {\n        amount: Math.round(formData.amount * 100),\n        currency: 'usd',\n        full_name: formData.full_name,\n        email: formData.email,\n        phone: formData.phone\n      });\n      const { client_secret, payment_intent_id } = intentRes.data;\n\n      // 2. Create payment method with individual elements\n      const { error: pmError, paymentMethod } = await stripe.createPaymentMethod({\n        type: 'card',\n        card: {\n          number: elements.getElement(CardNumberElement),\n          exp_month: elements.getElement(CardExpiryElement),\n          cvc: elements.getElement(CardCvcElement),\n        },\n        billing_details: {\n          name: formData.full_name,\n          email: formData.email,\n          phone: formData.phone\n        }\n      });\n      \n      if (pmError) {\n        setMessageType('error');\n        setMessage(pmError.message);\n        setLoading(false);\n        return;\n      }\n\n      // 3. Confirm card payment with Stripe.js\n      const { error: confirmError, paymentIntent } = await stripe.confirmCardPayment(client_secret, {\n        payment_method: paymentMethod.id\n      });\n      if (confirmError) {\n        setMessageType('error');\n        setMessage(confirmError.message);\n        setLoading(false);\n        return;\n      }\n      if (paymentIntent.status !== 'succeeded') {\n        setMessageType('error');\n        setMessage('Payment was not successful.');\n        setLoading(false);\n        return;\n      }\n\n      // 4. Notify backend to update transaction status\n      await axios.post(`${API_BASE_URL}/stripe/confirm-payment`, {\n        payment_intent_id,\n        payment_method_id: paymentMethod.id\n      });\n      setMessageType('success');\n      setMessage('Payment successful!');\n      setFormData({ full_name: '', email: '', phone: '', amount: '' });\n      setPaymentData({ payment_method: 'visa', card_number: '', expiry_month: '', expiry_year: '', cvv: '', cardholder_name: '' });\n      setStep(1);\n    } catch (error) {\n      setMessageType('error');\n      setMessage(error.response?.data?.detail || 'Payment failed. Please try again.');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <form onSubmit={handleSubmit}>\n      <div className=\"mb-3\">\n        <label className=\"form-label\">Card Number</label>\n        <CardNumberElement options={cardElementOptions} />\n      </div>\n      <div className=\"row\">\n        <div className=\"col-md-6\">\n          <div className=\"mb-3\">\n            <label className=\"form-label\">Expiry Date</label>\n            <CardExpiryElement options={cardElementOptions} />\n          </div>\n        </div>\n        <div className=\"col-md-6\">\n          <div className=\"mb-3\">\n            <label className=\"form-label\">CVC</label>\n            <CardCvcElement options={cardElementOptions} />\n          </div>\n        </div>\n      </div>\n      <button type=\"submit\" className=\"btn btn-pay text-white\" disabled={loading}>\n        {loading ? 'Processing...' : 'PAY NOW'}\n      </button>\n    </form>\n  );\n}\n*/\n\nfunction PaymentForm({ formData, setFormData, paymentData, setPaymentData, setMessage, setMessageType, setLoading, setStep, loading }) {\n  const stripe = useStripe();\n  const elements = useElements();\n\n  // Custom options for CardElement\n  const cardElementOptions = {\n    style: {\n      base: {\n        fontSize: '16px',\n        color: '#424770',\n        '::placeholder': {\n          color: '#aab7c4',\n        },\n        ':-webkit-autofill': {\n          color: '#fce883',\n        },\n      },\n      invalid: {\n        color: '#9e2146',\n      },\n    },\n    hidePostalCode: true, // This makes postal code optional\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n    setMessage('');\n    try {\n      console.log('Starting payment process...');\n      \n      // 1. Create payment intent\n      console.log('Creating payment intent...');\n      const intentRes = await axios.post(`${API_BASE_URL}/stripe/create-payment-intent`, {\n        amount: Math.round(formData.amount * 100),\n        currency: 'usd',\n        full_name: formData.full_name,\n        email: formData.email,\n        phone: formData.phone\n      });\n      console.log('Payment intent created:', intentRes.data);\n      const { client_secret, payment_intent_id } = intentRes.data;\n\n      // 2. Create payment method with Stripe.js\n      console.log('Creating payment method...');\n      const cardElement = elements.getElement(CardElement);\n      const { error: pmError, paymentMethod } = await stripe.createPaymentMethod({\n        type: 'card',\n        card: cardElement,\n        billing_details: {\n          name: formData.full_name,\n          email: formData.email,\n          phone: formData.phone\n        }\n      });\n      if (pmError) {\n        console.error('Payment method error:', pmError);\n        setMessageType('error');\n        setMessage(pmError.message);\n        setLoading(false);\n        return;\n      }\n      console.log('Payment method created:', paymentMethod.id);\n\n      // 3. Confirm card payment with Stripe.js\n      console.log('Confirming payment...');\n      const { error: confirmError, paymentIntent } = await stripe.confirmCardPayment(client_secret, {\n        payment_method: paymentMethod.id\n      });\n      if (confirmError) {\n        console.error('Payment confirmation error:', confirmError);\n        setMessageType('error');\n        setMessage(confirmError.message);\n        setLoading(false);\n        return;\n      }\n      console.log('Payment confirmed, status:', paymentIntent.status);\n      \n      // 4. Check payment status\n      if (paymentIntent.status === 'succeeded') {\n        console.log('Payment succeeded, notifying backend...');\n        // Payment succeeded, notify backend\n        try {\n          const backendRes = await axios.post(`${API_BASE_URL}/stripe/confirm-payment`, {\n            payment_intent_id,\n            payment_method_id: paymentMethod.id\n          });\n          console.log('Backend confirmation successful:', backendRes.data);\n          setMessageType('success');\n          setMessage('Payment successful!');\n          setFormData({ full_name: '', email: '', phone: '', amount: '' });\n          setPaymentData({ payment_method: 'visa', card_number: '', expiry_month: '', expiry_year: '', cvv: '', cardholder_name: '' });\n          setStep(1);\n        } catch (backendError) {\n          console.error('Backend confirmation error:', backendError);\n          // If backend fails but payment succeeded, still show success\n          if (backendError.response?.status === 400 && \n              backendError.response?.data?.detail?.includes('already succeeded')) {\n            setMessageType('success');\n            setMessage('Payment successful! (Transaction already processed)');\n            setFormData({ full_name: '', email: '', phone: '', amount: '' });\n            setPaymentData({ payment_method: 'visa', card_number: '', expiry_month: '', expiry_year: '', cvv: '', cardholder_name: '' });\n            setStep(1);\n          } else {\n            setMessageType('error');\n            setMessage('Payment succeeded but there was an issue with transaction recording. Please contact support.');\n          }\n        }\n      } else if (paymentIntent.status === 'requires_action') {\n        console.log('Payment requires action');\n        setMessageType('error');\n        setMessage('Payment requires additional authentication. Please try again.');\n      } else {\n        console.log('Payment not successful, status:', paymentIntent.status);\n        setMessageType('error');\n        setMessage(`Payment was not successful. Status: ${paymentIntent.status}`);\n      }\n    } catch (error) {\n      console.error('Payment process error:', error);\n      setMessageType('error');\n      setMessage(error.response?.data?.detail || 'Payment failed. Please try again.');\n    } finally {\n      console.log('Payment process completed, setting loading to false');\n      setLoading(false);\n    }\n  };\n\n  return (\n    <form onSubmit={handleSubmit}>\n      {/* Render CardElement with custom options */}\n      <div className=\"mb-3\">\n        <label className=\"form-label\">Card Details</label>\n        <CardElement options={cardElementOptions} />\n      </div>\n      <button type=\"submit\" className=\"btn btn-pay text-white\" disabled={loading}>\n        {loading ? 'Processing...' : 'PAY NOW'}\n      </button>\n    </form>\n  );\n}\n\nfunction App() {\n  const [step, setStep] = useState(1); // 1: Basic info, 2: Payment method, 3: Card details\n  const [formData, setFormData] = useState({\n    full_name: '',\n    email: '',\n    phone: '',\n    amount: ''\n  });\n  \n  const [paymentData, setPaymentData] = useState({\n    payment_method: 'visa',\n    card_number: '',\n    expiry_month: '',\n    expiry_year: '',\n    cvv: '',\n    cardholder_name: ''\n  });\n  \n  const [loading, setLoading] = useState(false);\n  const [message, setMessage] = useState('');\n  const [messageType, setMessageType] = useState('');\n  const [cardValidation, setCardValidation] = useState({});\n\n  const handleInputChange = (e) => {\n    const { name, value } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  };\n\n  const handlePaymentInputChange = (e) => {\n    const { name, value } = e.target;\n    \n    // Special handling for card number formatting\n    if (name === 'card_number') {\n      // Remove all non-digits\n      const digitsOnly = value.replace(/\\D/g, '');\n      \n      // Add spaces after every 4 digits\n      const formatted = digitsOnly.replace(/(\\d{4})(?=\\d)/g, '$1 ');\n      \n      // Limit to 19 characters (16 digits + 3 spaces)\n      const limited = formatted.slice(0, 19);\n      \n      setPaymentData(prev => ({\n        ...prev,\n        [name]: limited\n      }));\n    } else {\n      setPaymentData(prev => ({\n        ...prev,\n        [name]: value\n      }));\n    }\n  };\n\n  const validateBasicInfo = () => {\n    if (!formData.full_name || !formData.email || !formData.phone || !formData.amount) {\n      setMessage('Please fill in all fields');\n      setMessageType('error');\n      return false;\n    }\n    if (parseFloat(formData.amount) <= 0) {\n      setMessage('Amount must be greater than 0');\n      setMessageType('error');\n      return false;\n    }\n    return true;\n  };\n\n  const validateCardDetails = async () => {\n    // Only validate if card details are provided\n    if (!paymentData.card_number || !paymentData.expiry_month || !paymentData.expiry_year || !paymentData.cvv) {\n      setMessage('Please fill in all card details');\n      setMessageType('error');\n      return false;\n    }\n\n    // Client-side validation first\n    const cardNumber = paymentData.card_number.replace(/\\s/g, '');\n    if (cardNumber.length < 13 || cardNumber.length > 19) {\n      setMessage('Invalid card number length');\n      setMessageType('error');\n      return false;\n    }\n\n    // Basic Luhn algorithm check\n    const luhnCheck = (num) => {\n      let arr = (num + '')\n        .split('')\n        .reverse()\n        .map(x => parseInt(x));\n      let lastDigit = arr.splice(0, 1)[0];\n      let sum = arr.reduce((acc, val, i) => (i % 2 !== 0 ? acc + val : acc + ((val * 2) % 9) || 9), 0);\n      sum += lastDigit;\n      return sum % 10 === 0;\n    };\n\n    if (!luhnCheck(cardNumber)) {\n      setMessage('Invalid card number');\n      setMessageType('error');\n      return false;\n    }\n\n    // Check expiry date\n    const currentDate = new Date();\n    const currentYear = currentDate.getFullYear();\n    const currentMonth = currentDate.getMonth() + 1;\n    \n    const expYear = parseInt(paymentData.expiry_year);\n    const expMonth = parseInt(paymentData.expiry_month);\n    \n    if (expYear < currentYear || (expYear === currentYear && expMonth < currentMonth)) {\n      setMessage('Card has expired');\n      setMessageType('error');\n      return false;\n    }\n\n    // Check CVV length\n    const expectedCvvLength = paymentData.payment_method === 'amex' ? 4 : 3;\n    if (paymentData.cvv.length !== expectedCvvLength) {\n      setMessage(`CVV must be ${expectedCvvLength} digits for ${paymentData.payment_method.toUpperCase()}`);\n      setMessageType('error');\n      return false;\n    }\n\n    // Try backend validation if available, but don't fail if it's not\n    try {\n      const response = await axios.post(`${API_BASE_URL}/validate-card`, {\n        card_number: paymentData.card_number,\n        expiry_month: paymentData.expiry_month,\n        expiry_year: paymentData.expiry_year,\n        cvv: paymentData.cvv\n      }, {\n        timeout: 5000 // 5 second timeout\n      });\n\n      if (response.data.valid) {\n        setCardValidation(response.data);\n        return true;\n      } else {\n        setMessage(`Card validation failed: ${response.data.error}`);\n        setMessageType('error');\n        return false;\n      }\n    } catch (error) {\n      console.log('Backend validation failed, proceeding with client-side validation:', error.message);\n      // If backend validation fails, proceed with client-side validation\n      setCardValidation({\n        valid: true,\n        card_type: paymentData.payment_method,\n        masked_number: `**** **** **** ${cardNumber.slice(-4)}`\n      });\n      return true;\n    }\n  };\n\n  const handleNextStep = async () => {\n    setMessage('');\n    \n    if (step === 1) {\n      if (validateBasicInfo()) {\n        setStep(2);\n      }\n    } else if (step === 2) {\n      // Simply move to step 3 without validation - validation happens on submit\n      setStep(3);\n    }\n  };\n\n  const stripePromise = loadStripe(process.env.REACT_APP_STRIPE_PUBLISHABLE_KEY || 'pk_test_your_actual_publishable_key_here');\n\n  return (\n    <div className=\"payment-container\">\n      <div className=\"payment-card\">\n        <div className=\"payment-header\">\n          <h1>🔒 GenZ Payment Gateway</h1>\n          <p>Your payment information is encrypted and secure</p>\n        </div>\n\n        {message && (\n          <div className={`alert ${messageType === 'success' ? 'success-alert' : 'error-alert'} mb-4`}>\n            {message}\n          </div>\n        )}\n\n        <div className=\"progress-bar mb-4\">\n          <div className={`progress-step ${step >= 1 ? 'active' : ''}`}>1. Personal Info</div>\n          <div className={`progress-step ${step >= 2 ? 'active' : ''}`}>2. Payment Method</div>\n          <div className={`progress-step ${step >= 3 ? 'active' : ''}`}>3. Card Details</div>\n        </div>\n\n        {step === 1 && (\n          <div className=\"payment-step\">\n            <h3>Personal Information</h3>\n            <div className=\"mb-3\">\n              <label htmlFor=\"full_name\" className=\"form-label\">Full Name</label>\n              <input\n                type=\"text\"\n                className=\"form-control\"\n                id=\"full_name\"\n                name=\"full_name\"\n                value={formData.full_name}\n                onChange={handleInputChange}\n                required\n                placeholder=\"Enter your full name\"\n              />\n            </div>\n\n            <div className=\"mb-3\">\n              <label htmlFor=\"email\" className=\"form-label\">Email Address</label>\n              <input\n                type=\"email\"\n                className=\"form-control\"\n                id=\"email\"\n                name=\"email\"\n                value={formData.email}\n                onChange={handleInputChange}\n                required\n                placeholder=\"Enter your email\"\n              />\n            </div>\n\n            <div className=\"mb-3\">\n              <label htmlFor=\"phone\" className=\"form-label\">Phone Number</label>\n              <input\n                type=\"tel\"\n                className=\"form-control\"\n                id=\"phone\"\n                name=\"phone\"\n                value={formData.phone}\n                onChange={handleInputChange}\n                required\n                placeholder=\"Enter your phone number\"\n              />\n            </div>\n\n            <div className=\"mb-4\">\n              <label htmlFor=\"amount\" className=\"form-label\">Payment Amount</label>\n              <div className=\"input-group\">\n                <span className=\"input-group-text\">$</span>\n                <input\n                  type=\"number\"\n                  className=\"form-control\"\n                  id=\"amount\"\n                  name=\"amount\"\n                  value={formData.amount}\n                  onChange={handleInputChange}\n                  required\n                  min=\"0.01\"\n                  step=\"0.01\"\n                  placeholder=\"0.00\"\n                />\n              </div>\n            </div>\n\n            <button\n              type=\"button\"\n              className=\"btn btn-primary w-100\"\n              onClick={handleNextStep}\n            >\n              Continue to Payment Method\n            </button>\n          </div>\n        )}\n        {step === 2 && (\n          <div className=\"payment-step\">\n            <h3>Select Payment Method</h3>\n            <div className=\"payment-methods\">\n              <div className=\"payment-method-option\">\n                <input\n                  type=\"radio\"\n                  id=\"visa\"\n                  name=\"payment_method\"\n                  value=\"visa\"\n                  checked={paymentData.payment_method === 'visa'}\n                  onChange={handlePaymentInputChange}\n                />\n                <label htmlFor=\"visa\" className=\"payment-method-label\">\n                  <span className=\"card-icon\">💳</span>\n                  <span>Visa</span>\n                </label>\n              </div>\n              \n              <div className=\"payment-method-option\">\n                <input\n                  type=\"radio\"\n                  id=\"mastercard\"\n                  name=\"payment_method\"\n                  value=\"mastercard\"\n                  checked={paymentData.payment_method === 'mastercard'}\n                  onChange={handlePaymentInputChange}\n                />\n                <label htmlFor=\"mastercard\" className=\"payment-method-label\">\n                  <span className=\"card-icon\">💳</span>\n                  <span>Mastercard</span>\n                </label>\n              </div>\n              \n              <div className=\"payment-method-option\">\n                <input\n                  type=\"radio\"\n                  id=\"amex\"\n                  name=\"payment_method\"\n                  value=\"amex\"\n                  checked={paymentData.payment_method === 'amex'}\n                  onChange={handlePaymentInputChange}\n                />\n                <label htmlFor=\"amex\" className=\"payment-method-label\">\n                  <span className=\"card-icon\">💳</span>\n                  <span>American Express</span>\n                </label>\n              </div>\n              \n              <div className=\"payment-method-option\">\n                <input\n                  type=\"radio\"\n                  id=\"discover\"\n                  name=\"payment_method\"\n                  value=\"discover\"\n                  checked={paymentData.payment_method === 'discover'}\n                  onChange={handlePaymentInputChange}\n                />\n                <label htmlFor=\"discover\" className=\"payment-method-label\">\n                  <span className=\"card-icon\">💳</span>\n                  <span>Discover</span>\n                </label>\n              </div>\n            </div>\n\n            <div className=\"mt-4\">\n              <button\n                type=\"button\"\n                className=\"btn btn-secondary me-2\"\n                onClick={() => setStep(1)}\n              >\n                Back\n              </button>\n              <button\n                type=\"button\"\n                className=\"btn btn-primary\"\n                onClick={handleNextStep}\n              >\n                Continue to Card Details\n              </button>\n            </div>\n          </div>\n        )}\n        {step === 3 && (\n          <div className=\"payment-step\">\n            <h3>Card Details</h3>\n            <div className=\"card-preview\">\n              <div className=\"card-front\">\n                <div className=\"card-type\">{paymentData.payment_method.toUpperCase()}</div>\n                <div className=\"card-number\">\n                  {paymentData.card_number ? \n                    `**** **** **** ${paymentData.card_number.slice(-4)}` : \n                    '**** **** **** ****'\n                  }\n                </div>\n                <div className=\"card-details\">\n                  <span className=\"cardholder\">{paymentData.cardholder_name || 'CARDHOLDER NAME'}</span>\n                  <span className=\"expiry\">{paymentData.expiry_month || 'MM'}/{paymentData.expiry_year || 'YY'}</span>\n                </div>\n              </div>\n            </div>\n\n            <Elements stripe={stripePromise}>\n              <PaymentForm\n                formData={formData}\n                setFormData={setFormData}\n                paymentData={paymentData}\n                setPaymentData={setPaymentData}\n                setMessage={setMessage}\n                setMessageType={setMessageType}\n                setLoading={setLoading}\n                setStep={setStep}\n                loading={loading}\n              />\n            </Elements>\n          </div>\n        )}\n\n        {/* <div className=\"text-center mt-4\">\n          <small className=\"text-muted\">\n            🔒 PCI DSS Compliant • 256-bit SSL Encryption • Tokenized Payments\n          </small>\n        </div> */}\n        \n        {/* <div className=\"text-center mt-2\">\n          <small className=\"text-muted\">\n            Backend: {API_BASE_URL}\n          </small>\n        </div> */}\n      </div>\n    </div>\n  );\n}\n\nexport default App; "],"mappings":";;;AAAA,OAAOA,KAAK,IAAIC,QAAQ,QAAQ,OAAO;AACvC,OAAOC,KAAK,MAAM,OAAO;AACzB,OAAO,mBAAmB;AAC1B,SAASC,UAAU,QAAQ,mBAAmB;AAC9C,SAASC,QAAQ,EAAEC,WAAW,EAAEC,iBAAiB,EAAEC,iBAAiB,EAAEC,cAAc,EAAEC,SAAS,EAAEC,WAAW,QAAQ,yBAAyB;;AAE7I;AAAA,SAAAC,MAAA,IAAAC,OAAA;AACA,MAAMC,YAAY,GAAG,uBAAuB;;AAE5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,SAASC,WAAWA,CAAC;EAAEC,QAAQ;EAAEC,WAAW;EAAEC,WAAW;EAAEC,cAAc;EAAEC,UAAU;EAAEC,cAAc;EAAEC,UAAU;EAAEC,OAAO;EAAEC;AAAQ,CAAC,EAAE;EAAAC,EAAA;EACrI,MAAMC,MAAM,GAAGhB,SAAS,CAAC,CAAC;EAC1B,MAAMiB,QAAQ,GAAGhB,WAAW,CAAC,CAAC;;EAE9B;EACA,MAAMiB,kBAAkB,GAAG;IACzBC,KAAK,EAAE;MACLC,IAAI,EAAE;QACJC,QAAQ,EAAE,MAAM;QAChBC,KAAK,EAAE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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}